{% extends "layout/base.html" %} {% block content %}
<div class="loading" id="loadingSpinner">Loading&#8230;</div>
<div class="container">
    <div class="starter-template" id="rateAnime">
        <h1>Rate Previously Seen Anime</h1>
        <p class="lead">
            We need your rating on these anime to recommend you some other awesome anime!
            <br> Please rate the Anime from 0 (Not Seen) to 10 (Oscar Level Amazing).
        </p>
        <form id="animeForm" action="/api/animes/ratings" method="post">
            <div class="row">
                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px;">Kimi no Na wa. (Your name)</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/5/87048.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="32281" id="32281">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Fullmetal Alchemist: Brotherhood</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/5/47421.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="5114" id="5114">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Gintama</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/2/10038.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="918" id="918">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Steins; Gate</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/5/73199.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="9253" id="9253">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Haikyuu!</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/7/81992.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="32935" id="32935">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Death Note</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/9/9453.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="1535" id="1535">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px" >Hunter x Hunter</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/11/33657.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="11061" id="11061">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="col-sm-12 col-md-3 text-center">
                    <div class="bordered margin-bottom anime-card">
                        <h4 style="height: 40px">Code Geass R2</h4>
                        <img class="margin-bottom" src="https://myanimelist.cdn-dena.com/images/anime/4/9391.jpg" height="321" width="225">
                        <div class="form-group">
                            <select name="2904" id="2904">
                                <option value=0>0</option>
                                <option value=1>1</option>
                                <option value=2>2</option>
                                <option value=3>3</option>
                                <option value=4>4</option>
                                <option value=5>5</option>
                                <option value=6>6</option>
                                <option value=7>7</option>
                                <option value=8>8</option>
                                <option value=9>9</option>
                                <option value=10>10</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-sm-12 text-center">
                    <div class="form-group">
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </div>
            </div>
        </form>
    </div>
    <div class="starter-template" id="resultsAnime">
        <h1>Anime Recommendations</h1>
        <p class="lead">
            Below is our systems anime recommendations based on your ratings from the previous results. Check them out!
        </p>
        <div class="row" id="resultsAnimeItems">
            
        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
    crossorigin="anonymous"></script>
<script type='text/javascript'>

    document.getElementById("resultsAnime").style.display = "none";
    var results = [];

    let animeDoc = {
        32281 : { name: 'Kimi no Na wa.', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/5/87048.jpg'},
        5114: { name: 'Fullmetal Alchemist: Brotherhood', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/5/47421.jpg'},
        820: { name: 'Ginga Eiyuu Densetsu', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/13/13225.jpg'},
        4181: { name: 'Clannad: After Story', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/13/24647.jpg'},
        1575: { name: 'Code Geass: Hangyaku no Lelouch', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/5/50331.jpg'},
        263: { name: 'Hajime no Ippo', imgSrc: 'https://myanimelist.cdn-dena.com/images/anime/10/2025.jpg'},
        28851: { name : "Koe no Katachi", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/80136.jpg" },
        918: { name : "Gintama", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/2/10038.jpg" },
        2904: { name : "Code Geass: Hangyaku no Lelouch R2", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/4/9391.jpg" },
        28891: { name : "Haikyuu!! Second Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/76662.jpg" },
        199: { name : "Sen to Chihiro no Kamikakushi", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/6/79597.jpg" },
        23273: { name : "Shigatsu wa Kimi no Uso", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/67177.jpg" },
        24701: { name : "Mushishi Zoku Shou 2nd Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/68095.jpg" },
        12355: { name : "Ookami Kodomo no Ame to Yuki", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/35721.jpg" },
        44: { name : "Rurouni Kenshin: Meiji Kenkaku Romantan - Tsuioku-hen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/13160.jpg" },
        1: { name : "Cowboy Bebop", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/4/19644.jpg" },
        30276: { name : "One Punch Man", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/12/76049.jpg" },
        164: { name : "Mononoke Hime", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/7/75919.jpg" },
        7311: { name : "Suzumiya Haruhi no Shoushitsu", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/2/73842.jpg" },
        17074: { name : "Monogatari Series: Second Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/52133.jpg" },
        21939: { name : "Mushishi Zoku Shou", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/13/58533.jpg" },
        457: { name : "Mushishi", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/2/73862.jpg" },
        2001: { name : "Tengen Toppa Gurren Lagann", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/4/5123.jpg" },
        245: { name : "Great Teacher Onizuka", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/13/11460.jpg" },
        32983: { name : "Natsume Yuujinchou Go", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/11/81755.jpg" },
        5258: { name : "Hajime no Ippo: New Challenger", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/56617.jpg" },
        28957: { name : "Mushishi Zoku Shou: Suzu no Shizuku", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/72689.jpg" },
        11665: { name : "Natsume Yuujinchou Shi", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/37449.jpg" },
        431: { name : "Howl no Ugoku Shiro", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/5/75810.jpg" },
        11741: { name : "Fate/Zero 2nd Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/41125.jpg" },
        31757: { name : "Kizumonogatari II: Nekketsu-hen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/80930.jpg" },
        19: { name : "Monster", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/10/18793.jpg" },
        12365: { name : "Bakuman. 3rd Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/6/41845.jpg" },
        1535: { name : "Death Note", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/9453.jpg" },
        32366: { name : "Gintama: Aizome Kaori-hen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/79704.jpg" },
        30654: { name : "Ansatsu Kyoushitsu (TV) 2nd Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/77966.jpg" },
        20583: { name : "Haikyuu!!", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/7/76014.jpg" },
        19647: { name : "Hajime no Ippo: Rising", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/6/56147.jpg" },
        4282: { name : "Kara no Kyoukai 5: Mujun Rasen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/9246.jpg" },
        10379: { name : "Natsume Yuujinchou San", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/82394.jpg" },
        22135: { name : "Ping Pong The Animation", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/10/58041.jpg" },
        21329: { name : "Mushishi Special: Hihamukage", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/10/59315.jpg" },
        31043: { name : "Boku dake ga Inai Machi", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/10/77957.jpg" },
        7785: { name : "Yojouhan Shinwa Taikei", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/10/50457.jpg" },
        3297: { name : "Aria The Origination", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/6/77623.jpg" },
        30709: { name : "Kamisama Hajimemashita: Kako-hen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/81250.jpg" },
        6114: { name : "Rainbow: Nisha Rokubou no Shichinin", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/9/72697.jpg" },
        31240: { name : "Re:Zero kara Hajimeru Isekai Seikatsu", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/11/79410.jpg" },
        4565: { name : "Tengen Toppa Gurren Lagann Movie: Lagann-hen", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/12/19698.jpg" },
        5300: { name : "Zoku Natsume Yuujinchou", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/4/79738.jpg" },
        9989: { name : "Ano Hi Mita Hana no Namae wo Bokutachi wa Mada Shiranai.", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/5/79697.jpg" },
        24415: { name : "Kuroko no Basket 3rd Season", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/4/68299.jpg" },
        11577: { name : "Steins;Gate Movie: Fuka Ryouiki no Daija vu", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/50317.jpg" },
        10408: { name : "Hotarubi no Morie", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/8/38229.jpg" },
        28171: { name : "Shokugeki no Souma", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/3/72943.jpg" },
        32995: { name : "Yuri!!! on Ice", imgSrc: "https://myanimelist.cdn-dena.com/images/anime/6/81149.jpg" },
    }

    /* attach a submit handler to the form */
    $("#animeForm").submit(function (event) {

        /* stop form from submitting normally */
        event.preventDefault();
        document.getElementById("loadingSpinner").style.display = "block";
        /* get the action attribute from the <form action=""> element */
        var $form = $(this),
            url = $form.attr('action');

        /* Send the data using post with element id name and name2*/
        var posting = $.post(url, {
            32281: $("#32281 option:selected").text(),
            5114: $("#5114 option:selected").text(),
            918: $("#918 option:selected").text(),
            9253: $("#9253 option:selected").text(),
            32935: $("#32935 option:selected").text(),
            1535: $("#1535 option:selected").text(),
            11061: $("#11061 option:selected").text(),
            2904: $("#2904 option:selected").text(),
        });

        /* Alerts the results */
        posting.done(function (data) {
            results = data;
            document.getElementById("loadingSpinner").style.display = "none";
            document.getElementById("rateAnime").style.display = "none";
            document.getElementById("resultsAnime").style.display = "block";
            let resultsRow = document.getElementById("resultsAnimeItems");

            for (let result of results.data) {
                var div = document.createElement("div");
                div.className = "col-sm-12 col-md-3 text-center";

                var innerDiv = document.createElement("div");
                innerDiv.className = "bordered margin-bottom anime-card";
                
                var header = document.createElement("h4");
                var node = document.createTextNode(animeDoc[result.anime_id].name);
                header.className = "title-header";
                header.appendChild(node);
                innerDiv.appendChild(header);

                var image = document.createElement("IMG");
                image.src = animeDoc[result.anime_id].imgSrc;
                image.width = "225";
                image.height = "321";
                innerDiv.appendChild(image);

                header = document.createElement("h4");
                roundedRating = Math.floor(result.rating * 100)/100;
                node = document.createTextNode('Rating: ' + roundedRating);
                header.appendChild(node);
                innerDiv.appendChild(header);
                
                div.appendChild(innerDiv);
                resultsRow.appendChild(div);
            }
        });
    });
</script> {% endblock %} {% block footer %} {% include "include/footer.html" %} {% endblock %}